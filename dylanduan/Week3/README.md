第三周作业

判断字符"a"在字符串中的位置


Q：为什么如下模型无法判断一个字符序列中某个字符的位置？
```
class TorchModel(nn.Module):
    def __init__(self, vector_dim, sentence_length, vocab):
        super(TorchModel, self).__init__()
        self.embedding = nn.Embedding(len(vocab), vector_dim)  #embedding层
        self.pool = nn.AvgPool1d(sentence_length)   #池化层
        self.classify = nn.Linear(vector_dim, 1)     #线性层
        self.activation = torch.sigmoid     #sigmoid归一化函数
        self.loss = nn.functional.mse_loss  #loss函数采用均方差损失
```
A：AvgPool1d层将将整个序列的信息融合为一个向量，对字符序列中的位置关系特征进行了平均，消除了输入序列的位置关系，就丢失了位置信息，导致模型无法区分哪个位置包含特定的字符。

采用RNN实现，结果如下：


<img width="640" alt="image" src="https://github.com/dylanduansy/SXLNLP/assets/173186153/5d30cbcd-61c4-4d08-bcea-2d044a47f09c">

预测结果（0为起始位置）：

```

输入：fnvaee, 预测类别：3, 概率值：tensor([ 0.4145, -0.4653,  3.4421,  8.5347,  2.0882, -6.9487, -0.4292, -0.9830,
        -0.4620, -0.6077, -0.4750, -0.7858, -0.3489, -0.5622, -0.4455, -0.6499,
        -0.4829, -0.8064, -0.6703, -0.7454, -0.4261, -0.4140, -0.6719, -0.7042,
        -0.6790, -0.5358, -1.0013, -0.4847])
输入：wzadfg, 预测类别：2, 概率值：tensor([ 0.5807,  5.0535,  7.2842,  4.3906, -4.3918, -3.0984, -2.0160, -2.7128,
        -2.4431, -2.3523, -2.1498, -2.1871, -1.6812, -1.8948, -2.1187, -2.5922,
        -2.3856, -2.4895, -2.6008, -2.1782, -1.4439, -2.0177, -2.1190, -2.1282,
        -2.0376, -2.3353, -2.8243, -2.0110])
输入：rqwaeg, 预测类别：3, 概率值：tensor([-0.2799, -0.5218,  3.6475,  8.4199,  1.6832, -6.9016, -0.1788, -0.6341,
        -0.0979, -0.3153, -0.2069, -0.5579, -0.1564, -0.3282, -0.1401, -0.2813,
        -0.1690, -0.5350, -0.3008, -0.4963, -0.2805, -0.1345, -0.3937, -0.4883,
        -0.4862, -0.2269, -0.6682, -0.2376])
输入：nakwww, 预测类别：1, 概率值：tensor([ 5.3355,  8.1620,  4.7161, -0.8821, -3.0858,  1.0071, -4.1867, -5.0692,
        -4.9160, -4.6158, -4.3505, -4.2494, -3.1022, -3.8789, -4.4909, -4.9615,
        -4.5935, -4.7079, -5.0522, -4.2195, -3.2912, -4.1954, -4.2114, -4.1215,
        -3.9529, -4.6465, -5.1853, -4.0938])
输入：testab, 预测类别：4, 概率值：tensor([ 3.0424, -2.5477, -2.8137,  2.0446,  8.0533, -0.5384, -0.9488, -0.9593,
        -0.5482, -0.8433, -0.7512, -0.7807, -0.0910, -0.3824, -0.7715, -0.5901,
        -0.4780, -1.0439, -0.6755, -0.7727, -0.9967, -0.3509, -0.9014, -1.2031,
        -0.8213, -0.7021, -1.1500, -0.4005])
输入：teatcd, 预测类别：2, 概率值：tensor([ 1.1665,  4.9828,  7.3921,  4.6211, -3.9708, -2.9372, -2.3227, -3.1019,
        -2.8954, -2.6957, -2.4488, -2.3280, -1.8832, -2.0292, -2.4613, -3.0489,
        -2.7690, -2.7848, -3.0442, -2.3887, -1.5123, -2.2648, -2.4252, -2.3655,
        -2.1653, -2.6942, -3.2257, -2.1961])
输入：aestef, 预测类别：0, 概率值：tensor([ 7.7043,  5.1382,  0.6023, -0.7712,  2.3044,  1.2413, -4.1986, -5.1452,
        -4.9453, -4.6024, -4.3227, -4.1890, -2.9144, -3.8216, -4.5653, -4.9886,
        -4.5182, -4.6755, -5.1030, -4.1994, -3.3203, -4.1600, -4.2972, -4.1340,
        -3.8567, -4.6391, -5.2202, -4.0071])
```

